var PageSupportBot=function(e){"use strict";function t(){}function n(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(n)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function c(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function h(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function f(e){return document.createTextNode(e)}function g(){return f(" ")}function d(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function x(e,t){e.value=null==t?"":t}function b(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}e.selectedIndex=-1}function w(e,t,n){e.classList[n?"add":"remove"](t)}let k;function v(e){k=e}function A(){if(!k)throw new Error("Function called outside component initialization");return k}function E(){const e=A();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const s=function(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}(t,n);r.slice().forEach((t=>{t.call(e,s)}))}}}const S=[],$=[],_=[],T=[],O=Promise.resolve();let M=!1;function C(){M||(M=!0,O.then(N))}function z(){return C(),O}function I(e){_.push(e)}let R=!1;const j=new Set;function N(){if(!R){R=!0;do{for(let e=0;e<S.length;e+=1){const t=S[e];v(t),F(t.$$)}for(v(null),S.length=0;$.length;)$.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];j.has(t)||(j.add(t),t())}_.length=0}while(S.length);for(;T.length;)T.pop()();M=!1,R=!1,j.clear()}}function F(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(I)}}const P=new Set;let L;function q(){L={r:0,c:[],p:L}}function B(){L.r||s(L.c),L=L.p}function D(e,t){e&&e.i&&(P.delete(e),e.i(t))}function U(e,t,n,r){if(e&&e.o){if(P.has(e))return;P.add(e),L.c.push((()=>{P.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function Z(e,t,r,o){const{fragment:a,on_mount:l,on_destroy:u,after_update:c}=e.$$;a&&a.m(t,r),o||I((()=>{const t=l.map(n).filter(i);u?u.push(...t):s(t),e.$$.on_mount=[]})),c.forEach(I)}function V(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function H(e,n,i,o,a,l,c,p=[-1]){const h=k;v(e);const f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:r(),dirty:p,skip_bound:!1,root:n.target||h.$$.root};c&&c(f.root);let g=!1;if(f.ctx=i?i(e,n.props||{},((t,n,...r)=>{const s=r.length?r[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),g&&function(e,t){-1===e.$$.dirty[0]&&(S.push(e),C(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],f.update(),g=!0,s(f.before_update),f.fragment=!!o&&o(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(u)}else f.fragment&&f.fragment.c();n.intro&&D(e.$$.fragment),Z(e,n.target,n.anchor,n.customElement),N()}v(h)}class K{$destroy(){V(this,1),this.$destroy=t}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const G="1.0.0";function J(e,t,n,r){if(void 0===e||void 0===t||void 0===n||void 0===r)throw new X(`getBotConfig() in state.js called with missing argument. newConfig=${e}; waitForStartNewConversation= ${r}, getConfigFromRemote=${t}; localStorageKey=${n}`);if(e)botJSON=Y("TBD",n);else{let e=localStorage.getItem(n);if(!t||e||r||(e=Y("TBD",n)),e){const t=Object.freeze(JSON.parse(e));if(W(t.version))return t}else if(!r)throw new X("getBotConfig() in state.js failed to acquire a botConfig from localStorage and remote and waitForStartNewConversation prop was false")}}function X(e){this.name="botConfig acquisition error",this.message=e,this.stack=(new Error).stack}function W(e){if(G[0]===e[0])return!0;throw new X(`botConfig version 1.0.0 or 1.0.0 doesn't match the version of the configuration file the bot read: ${e}.`)}async function Y(e,t){try{const n=await fetch(e),r=await n.json();return localStorage.setItem(t,r),r}catch(e){console.log(e)}}function Q(e){return e+"conversation"}function ee(e){try{return JSON.parse(sessionStorage.getItem(Q(e)))}catch(e){return console.log(`error ${e} getting sessionStorage in getConversation()`),null}}function te(e,t){sessionStorage.setItem(Q(t),JSON.stringify(e))}X.prototype=new Error;var ne="INUMBER",re="IOP1",se="IOP2",ie="IOP3",oe="IVAR",ae="IVARNAME",le="IFUNCALL",ue="IFUNDEF",ce="IEXPR",pe="IEXPREVAL",he="IMEMBER",fe="IENDSTATEMENT",ge="IARRAY";function de(e,t){this.type=e,this.value=null!=t?t:0}function me(e){return new de(re,e)}function ye(e){return new de(se,e)}function xe(e){return new de(ie,e)}function be(e,t,n,r,s){for(var i,o,a,l,u=[],c=[],p=0;p<e.length;p++){var h=e[p],f=h.type;if(f===ne||f===ae)Array.isArray(h.value)?u.push.apply(u,be(h.value.map((function(e){return new de(ne,e)})).concat(new de(ge,h.value.length)),t,n,r,s)):u.push(h);else if(f===oe&&s.hasOwnProperty(h.value))h=new de(ne,s[h.value]),u.push(h);else if(f===se&&u.length>1)o=u.pop(),i=u.pop(),l=n[h.value],h=new de(ne,l(i.value,o.value)),u.push(h);else if(f===ie&&u.length>2)a=u.pop(),o=u.pop(),i=u.pop(),"?"===h.value?u.push(i.value?o.value:a.value):(l=r[h.value],h=new de(ne,l(i.value,o.value,a.value)),u.push(h));else if(f===re&&u.length>0)i=u.pop(),l=t[h.value],h=new de(ne,l(i.value)),u.push(h);else if(f===ce){for(;u.length>0;)c.push(u.shift());c.push(new de(ce,be(h.value,t,n,r,s)))}else if(f===he&&u.length>0)i=u.pop(),u.push(new de(ne,i.value[h.value]));else{for(;u.length>0;)c.push(u.shift());c.push(h)}}for(;u.length>0;)c.push(u.shift());return c}function we(e,t,n){for(var r=[],s=0;s<e.length;s++){var i=e[s],o=i.type;if(o===oe&&i.value===t)for(var a=0;a<n.tokens.length;a++){var l,u=n.tokens[a];l=u.type===re?me(u.value):u.type===se?ye(u.value):u.type===ie?xe(u.value):new de(u.type,u.value),r.push(l)}else o===ce?r.push(new de(ce,we(i.value,t,n))):r.push(i)}return r}function ke(e,t,n){var r,s,i,o,a,l,u=[];if(Ae(e))return Ee(e,n);for(var c=e.length,p=0;p<c;p++){var h=e[p],f=h.type;if(f===ne||f===ae)u.push(h.value);else if(f===se)s=u.pop(),r=u.pop(),"and"===h.value?u.push(!!r&&!!ke(s,t,n)):"or"===h.value?u.push(!!r||!!ke(s,t,n)):"="===h.value?(o=t.binaryOps[h.value],u.push(o(r,ke(s,t,n),n))):(o=t.binaryOps[h.value],u.push(o(Ee(r,n),Ee(s,n))));else if(f===ie)i=u.pop(),s=u.pop(),r=u.pop(),"?"===h.value?u.push(ke(r?s:i,t,n)):(o=t.ternaryOps[h.value],u.push(o(Ee(r,n),Ee(s,n),Ee(i,n))));else if(f===oe)if(h.value in t.functions)u.push(t.functions[h.value]);else if(h.value in t.unaryOps&&t.parser.isOperatorEnabled(h.value))u.push(t.unaryOps[h.value]);else{var g=n[h.value];if(void 0===g)throw new Error("undefined variable: "+h.value);u.push(g)}else if(f===re)r=u.pop(),o=t.unaryOps[h.value],u.push(o(Ee(r,n)));else if(f===le){for(l=h.value,a=[];l-- >0;)a.unshift(Ee(u.pop(),n));if(!(o=u.pop()).apply||!o.call)throw new Error(o+" is not a function");u.push(o.apply(void 0,a))}else if(f===ue)u.push(function(){for(var e=u.pop(),r=[],s=h.value;s-- >0;)r.unshift(u.pop());var i=u.pop(),o=function(){for(var s=Object.assign({},n),i=0,o=r.length;i<o;i++)s[r[i]]=arguments[i];return ke(e,t,s)};return Object.defineProperty(o,"name",{value:i,writable:!1}),n[i]=o,o}());else if(f===ce)u.push(ve(h,t));else if(f===pe)u.push(h);else if(f===he)r=u.pop(),u.push(r[h.value]);else if(f===fe)u.pop();else{if(f!==ge)throw new Error("invalid Expression");for(l=h.value,a=[];l-- >0;)a.unshift(u.pop());u.push(a)}}if(u.length>1)throw new Error("invalid Expression (parity)");return 0===u[0]?0:Ee(u[0],n)}function ve(e,t,n){return Ae(e)?e:{type:pe,value:function(n){return ke(e.value,t,n)}}}function Ae(e){return e&&e.type===pe}function Ee(e,t){return Ae(e)?e.value(t):e}function Se(e,t){for(var n,r,s,i,o,a,l=[],u=0;u<e.length;u++){var c=e[u],p=c.type;if(p===ne)"number"==typeof c.value&&c.value<0?l.push("("+c.value+")"):Array.isArray(c.value)?l.push("["+c.value.map($e).join(", ")+"]"):l.push($e(c.value));else if(p===se)r=l.pop(),n=l.pop(),i=c.value,t?"^"===i?l.push("Math.pow("+n+", "+r+")"):"and"===i?l.push("(!!"+n+" && !!"+r+")"):"or"===i?l.push("(!!"+n+" || !!"+r+")"):"||"===i?l.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+r+")))"):"=="===i?l.push("("+n+" === "+r+")"):"!="===i?l.push("("+n+" !== "+r+")"):"["===i?l.push(n+"[("+r+") | 0]"):l.push("("+n+" "+i+" "+r+")"):"["===i?l.push(n+"["+r+"]"):l.push("("+n+" "+i+" "+r+")");else if(p===ie){if(s=l.pop(),r=l.pop(),n=l.pop(),"?"!==(i=c.value))throw new Error("invalid Expression");l.push("("+n+" ? "+r+" : "+s+")")}else if(p===oe||p===ae)l.push(c.value);else if(p===re)n=l.pop(),"-"===(i=c.value)||"+"===i?l.push("("+i+n+")"):t?"not"===i?l.push("(!"+n+")"):"!"===i?l.push("fac("+n+")"):l.push(i+"("+n+")"):"!"===i?l.push("("+n+"!)"):l.push("("+i+" "+n+")");else if(p===le){for(a=c.value,o=[];a-- >0;)o.unshift(l.pop());i=l.pop(),l.push(i+"("+o.join(", ")+")")}else if(p===ue){for(r=l.pop(),a=c.value,o=[];a-- >0;)o.unshift(l.pop());n=l.pop(),t?l.push("("+n+" = function("+o.join(", ")+") { return "+r+" })"):l.push("("+n+"("+o.join(", ")+") = "+r+")")}else if(p===he)n=l.pop(),l.push(n+"."+c.value);else if(p===ge){for(a=c.value,o=[];a-- >0;)o.unshift(l.pop());l.push("["+o.join(", ")+"]")}else if(p===ce)l.push("("+Se(c.value,t)+")");else if(p!==fe)throw new Error("invalid Expression")}return l.length>1&&(l=t?[l.join(",")]:[l.join(";")]),String(l[0])}function $e(e){return"string"==typeof e?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function _e(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function Te(e,t,n){for(var r=!!(n=n||{}).withMembers,s=null,i=0;i<e.length;i++){var o=e[i];o.type===oe||o.type===ae?r||_e(t,o.value)?null!==s?(_e(t,s)||t.push(s),s=o.value):s=o.value:t.push(o.value):o.type===he&&r&&null!==s?s+="."+o.value:o.type===ce?Te(o.value,t,n):null!==s&&(_e(t,s)||t.push(s),s=null)}null===s||_e(t,s)||t.push(s)}function Oe(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}de.prototype.toString=function(){switch(this.type){case ne:case re:case se:case ie:case oe:case ae:case fe:return this.value;case le:return"CALL "+this.value;case ue:return"DEF "+this.value;case ge:return"ARRAY "+this.value;case he:return"."+this.value;default:return"Invalid Instruction"}},Oe.prototype.simplify=function(e){return e=e||{},new Oe(be(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)},Oe.prototype.substitute=function(e,t){return t instanceof Oe||(t=this.parser.parse(String(t))),new Oe(we(this.tokens,e,t),this.parser)},Oe.prototype.evaluate=function(e){return e=e||{},ke(this.tokens,this,e)},Oe.prototype.toString=function(){return Se(this.tokens,!1)},Oe.prototype.symbols=function(e){e=e||{};var t=[];return Te(this.tokens,t,e),t},Oe.prototype.variables=function(e){e=e||{};var t=[];Te(this.tokens,t,e);var n=this.functions;return t.filter((function(e){return!(e in n)}))},Oe.prototype.toJSFunction=function(e,t){var n=this,r=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+Se(this.simplify(t).tokens,!0)+"; }");return function(){return r.apply(n,arguments)}};var Me="TEOF",Ce="TOP",ze="TNUMBER",Ie="TSTRING",Re="TPAREN",je="TBRACKET",Ne="TCOMMA",Fe="TNAME",Pe="TSEMICOLON";function Le(e,t,n){this.type=e,this.value=t,this.index=n}function qe(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}Le.prototype.toString=function(){return this.type+": "+this.value},qe.prototype.newToken=function(e,t,n){return new Le(e,t,null!=n?n:this.pos)},qe.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},qe.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},qe.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(Me,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},qe.prototype.isString=function(){var e=!1,t=this.pos,n=this.expression.charAt(t);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,t+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var s=this.expression.substring(t+1,r);this.current=this.newToken(Ie,this.unescape(s),t),e=!0;break}r=this.expression.indexOf(n,r+1)}return e},qe.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return("("===e||")"===e)&&(this.current=this.newToken(Re,e),this.pos++,!0)},qe.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return!("["!==e&&"]"!==e||!this.isOperatorEnabled("["))&&(this.current=this.newToken(je,e),this.pos++,!0)},qe.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(Ne,","),this.pos++,!0)},qe.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(Pe,";"),this.pos++,!0)},qe.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(t>e){var r=this.expression.substring(e,t);if(r in this.consts)return this.current=this.newToken(ze,this.consts[r]),this.pos+=r.length,!0}return!1},qe.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(t>e){var r=this.expression.substring(e,t);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(Ce,r),this.pos+=r.length,!0}return!1},qe.prototype.isName=function(){for(var e=this.pos,t=e,n=!1;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()){if(t===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(t===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var s=this.expression.substring(e,t);return this.current=this.newToken(Fe,s),this.pos+=s.length,!0}return!1},qe.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);!(" "!==t&&"\t"!==t&&"\n"!==t&&"\r"!==t||(e=!0,this.pos++,this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var Be=/^[0-9a-f]{4}$/i;function De(e,t,n){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}qe.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var n=e.substring(0,t);t>=0;){var r=e.charAt(++t);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var s=e.substring(t+1,t+5);Be.test(s)||this.parseError("Illegal escape sequence: \\u"+s),n+=String.fromCharCode(parseInt(s,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++t;var i=e.indexOf("\\",t);n+=e.substring(t,i<0?e.length:i),t=i}return n},qe.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},qe.prototype.isRadixInteger=function(){var e,t,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))e=16,t=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;e=2,t=/^[01]$/i,++n}for(var r=!1,s=n;n<this.expression.length;){var i=this.expression.charAt(n);if(!t.test(i))break;n++,r=!0}return r&&(this.current=this.newToken(ze,parseInt(this.expression.substring(s,n),e)),this.pos=n),r},qe.prototype.isNumber=function(){for(var e,t=!1,n=this.pos,r=n,s=n,i=!1,o=!1;n<this.expression.length&&((e=this.expression.charAt(n))>="0"&&e<="9"||!i&&"."===e);)"."===e?i=!0:o=!0,n++,t=o;if(t&&(s=n),"e"===e||"E"===e){n++;for(var a=!0,l=!1;n<this.expression.length;){if(e=this.expression.charAt(n),!a||"+"!==e&&"-"!==e){if(!(e>="0"&&e<="9"))break;l=!0,a=!1}else a=!1;n++}l||(n=s)}return t?(this.current=this.newToken(ze,parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=s,t},qe.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if("+"===t||"-"===t||"*"===t||"/"===t||"%"===t||"^"===t||"?"===t||":"===t||"."===t)this.current=this.newToken(Ce,t);else if("∙"===t||"•"===t)this.current=this.newToken(Ce,"*");else if(">"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Ce,">="),this.pos++):this.current=this.newToken(Ce,">");else if("<"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Ce,"<="),this.pos++):this.current=this.newToken(Ce,"<");else if("|"===t){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(Ce,"||"),this.pos++}else if("="===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Ce,"=="),this.pos++):this.current=this.newToken(Ce,t);else{if("!"!==t)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Ce,"!="),this.pos++):this.current=this.newToken(Ce,t)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=e,!1)},qe.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)},qe.prototype.getCoordinates=function(){var e,t=0,n=-1;do{t++,e=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:t,column:e}},qe.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)},De.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},De.prototype.tokenMatches=function(e,t){return void 0===t||(Array.isArray(t)?_e(t,e.value):"function"==typeof t?t(e):e.value===t)},De.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},De.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},De.prototype.accept=function(e,t){return!(this.nextToken.type!==e||!this.tokenMatches(this.nextToken,t))&&(this.next(),!0)},De.prototype.expect=function(e,t){if(!this.accept(e,t)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(t||e))}},De.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;if(this.accept(Fe)||this.accept(Ce,(function(e){return e.value in t})))e.push(new de(oe,this.current.value));else if(this.accept(ze))e.push(new de(ne,this.current.value));else if(this.accept(Ie))e.push(new de(ne,this.current.value));else if(this.accept(Re,"("))this.parseExpression(e),this.expect(Re,")");else{if(!this.accept(je,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(je,"]"))e.push(new de(ge,0));else{var n=this.parseArrayList(e);e.push(new de(ge,n))}}},De.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),this.parseUntilEndStatement(e,t)||this.pushExpression(e,t))},De.prototype.pushExpression=function(e,t){for(var n=0,r=t.length;n<r;n++)e.push(t[n])},De.prototype.parseUntilEndStatement=function(e,t){return!!this.accept(Pe)&&(!this.nextToken||this.nextToken.type===Me||this.nextToken.type===Re&&")"===this.nextToken.value||t.push(new de(fe)),this.nextToken.type!==Me&&this.parseExpression(t),e.push(new de(ce,t)),!0)},De.prototype.parseArrayList=function(e){for(var t=0;!this.accept(je,"]");)for(this.parseExpression(e),++t;this.accept(Ne);)this.parseExpression(e),++t;return t},De.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(Ce,"=");){var t=e.pop(),n=[],r=e.length-1;if(t.type!==le){if(t.type!==oe&&t.type!==he)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),e.push(new de(ae,t.value)),e.push(new de(ce,n)),e.push(ye("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var s=0,i=t.value+1;s<i;s++){var o=r-s;e[o].type===oe&&(e[o]=new de(ae,e[o].value))}this.parseVariableAssignmentExpression(n),e.push(new de(ce,n)),e.push(new de(ue,t.value))}}},De.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(Ce,"?");){var t=[],n=[];this.parseConditionalExpression(t),this.expect(Ce,":"),this.parseConditionalExpression(n),e.push(new de(ce,t)),e.push(new de(ce,n)),e.push(xe("?"))}},De.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(Ce,"or");){var t=[];this.parseAndExpression(t),e.push(new de(ce,t)),e.push(ye("or"))}},De.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(Ce,"and");){var t=[];this.parseComparison(t),e.push(new de(ce,t)),e.push(ye("and"))}};var Ue=["==","!=","<","<=",">=",">","in"];De.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(Ce,Ue);){var t=this.current;this.parseAddSub(e),e.push(ye(t.value))}};var Ze=["+","-","||"];De.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(Ce,Ze);){var t=this.current;this.parseTerm(e),e.push(ye(t.value))}};var Ve=["*","/","%"];function He(e,t){return Number(e)+Number(t)}function Ke(e,t){return e-t}function Ge(e,t){return e*t}function Je(e,t){return e/t}function Xe(e,t){return e%t}function We(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function Ye(e,t){return e===t}function Qe(e,t){return e!==t}function et(e,t){return e>t}function tt(e,t){return e<t}function nt(e,t){return e>=t}function rt(e,t){return e<=t}function st(e,t){return Boolean(e&&t)}function it(e,t){return Boolean(e||t)}function ot(e,t){return _e(t,e)}function at(e){return(Math.exp(e)-Math.exp(-e))/2}function lt(e){return(Math.exp(e)+Math.exp(-e))/2}function ut(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function ct(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function pt(e){return Math.log(e+Math.sqrt(e*e-1))}function ht(e){return Math.log((1+e)/(1-e))/2}function ft(e){return Math.log(e)*Math.LOG10E}function gt(e){return-e}function dt(e){return!e}function mt(e){return e<0?Math.ceil(e):Math.floor(e)}function yt(e){return Math.random()*(e||1)}function xt(e){return wt(e+1)}De.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(Ce,Ve);){var t=this.current;this.parseFactor(e),e.push(ye(t.value))}},De.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;if(this.save(),this.accept(Ce,(function(e){return e.value in t}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===Re&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(e);if(this.nextToken.type===Pe||this.nextToken.type===Ne||this.nextToken.type===Me||this.nextToken.type===Re&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(e)}var n=this.current;this.parseFactor(e),e.push(me(n.value))}else this.parseExponential(e)},De.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(Ce,"^");)this.parseFactor(e),e.push(ye("^"))},De.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(Ce,"!");)e.push(me("!"))},De.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;if(this.accept(Ce,(function(e){return e.value in t}))){var n=this.current;this.parseAtom(e),e.push(me(n.value))}else for(this.parseMemberExpression(e);this.accept(Re,"(");)if(this.accept(Re,")"))e.push(new de(le,0));else{var r=this.parseArgumentList(e);e.push(new de(le,r))}},De.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(Re,")");)for(this.parseExpression(e),++t;this.accept(Ne);)this.parseExpression(e),++t;return t},De.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(Ce,".")||this.accept(je,"[");){var t=this.current;if("."===t.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(Fe),e.push(new de(he,this.current.value))}else{if("["!==t.value)throw new Error("unexpected symbol: "+t.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(je,"]"),e.push(ye("["))}}};var bt=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function wt(e){var t,n;if(function(e){return isFinite(e)&&e===Math.round(e)}(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var r=e-2,s=e-1;r>1;)s*=r,r--;return 0===s&&(s=1),s}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*wt(1-e));if(e>=171.35)return 1/0;if(e>85){var i=e*e,o=i*e,a=o*e,l=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*i)-139/(51840*o)-571/(2488320*a)+163879/(209018880*l)+5246819/(75246796800*l*e))}--e,n=bt[0];for(var u=1;u<bt.length;++u)n+=bt[u]/(e+u);return t=e+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*n}function kt(e){return Array.isArray(e)?e.length:String(e).length}function vt(){for(var e=0,t=0,n=0;n<arguments.length;n++){var r,s=Math.abs(arguments[n]);t<s?(e=e*(r=t/s)*r+1,t=s):e+=s>0?(r=s/t)*r:s}return t===1/0?1/0:t*Math.sqrt(e)}function At(e,t,n){return e?t:n}function Et(e,t){return void 0===t||0==+t?Math.round(e):(e=+e,t=-+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}function St(e,t,n){return n&&(n[e]=t),t}function $t(e,t){return e[0|t]}function _t(e){return 1===arguments.length&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function Tt(e){return 1===arguments.length&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function Ot(e,t){if("function"!=typeof e)throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map((function(t,n){return e(t,n)}))}function Mt(e,t,n){if("function"!=typeof e)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(t,n,r){return e(t,n,r)}),t)}function Ct(e,t){if("function"!=typeof e)throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter((function(t,n){return e(t,n)}))}function zt(e,t){if(!Array.isArray(t)&&"string"!=typeof t)throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function It(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function Rt(e){return(e>0)-(e<0)||+e}var jt=1/3;function Nt(e){return e<0?-Math.pow(-e,jt):Math.pow(e,jt)}function Ft(e){return Math.exp(e)-1}function Pt(e){return Math.log(1+e)}function Lt(e){return Math.log(e)/Math.LN2}function qt(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||at,cosh:Math.cosh||lt,tanh:Math.tanh||ut,asinh:Math.asinh||ct,acosh:Math.acosh||pt,atanh:Math.atanh||ht,sqrt:Math.sqrt,cbrt:Math.cbrt||Nt,log:Math.log,log2:Math.log2||Lt,ln:Math.log,lg:Math.log10||ft,log10:Math.log10||ft,expm1:Math.expm1||Ft,log1p:Math.log1p||Pt,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||mt,"-":gt,"+":Number,exp:Math.exp,not:dt,length:kt,"!":xt,sign:Math.sign||Rt},this.binaryOps={"+":He,"-":Ke,"*":Ge,"/":Je,"%":Xe,"^":Math.pow,"||":We,"==":Ye,"!=":Qe,">":et,"<":tt,">=":nt,"<=":rt,and:st,or:it,in:ot,"=":St,"[":$t},this.ternaryOps={"?":At},this.functions={random:yt,fac:xt,min:Tt,max:_t,hypot:Math.hypot||vt,pyt:Math.hypot||vt,pow:Math.pow,atan2:Math.atan2,if:At,gamma:wt,roundTo:Et,map:Ot,fold:Mt,filter:Ct,indexOf:zt,join:It},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}qt.prototype.parse=function(e){var t=[],n=new De(this,new qe(this,e),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(t),n.expect(Me,"EOF"),new Oe(t,this)},qt.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var Bt=new qt;qt.parse=function(e){return Bt.parse(e)},qt.evaluate=function(e,t){return Bt.parse(e).evaluate(t)};var Dt={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};qt.prototype.isOperatorEnabled=function(e){var t=function(e){return Dt.hasOwnProperty(e)?Dt[e]:e}(e),n=this.options.operators||{};return!(t in n)||!!n[t]};
/*!
     Based on ndef.parser, by Raphael Graf(r@undefined.ch)
     http://www.undefined.ch/mparser/index.html

     Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)

     You are free to use and modify this code in anyway you find useful. Please leave this comment in the code
     to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,
     but don't feel like you have to let me know or ask permission.
    */
var Ut={Parser:qt,Expression:Oe};function Zt(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var Vt=Zt(Object.freeze({__proto__:null,default:Ut,Expression:Oe,Parser:qt}));function Ht(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function Kt(e){return function t(n){return 0===arguments.length||Ht(n)?t:e.apply(this,arguments)}}function Gt(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return Ht(n)?t:Kt((function(t){return e(n,t)}));default:return Ht(n)&&Ht(r)?t:Ht(n)?Kt((function(t){return e(t,r)})):Ht(r)?Kt((function(t){return e(n,t)})):e(n,r)}}}function Jt(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,s){return t.apply(this,arguments)};case 5:return function(e,n,r,s,i){return t.apply(this,arguments)};case 6:return function(e,n,r,s,i,o){return t.apply(this,arguments)};case 7:return function(e,n,r,s,i,o,a){return t.apply(this,arguments)};case 8:return function(e,n,r,s,i,o,a,l){return t.apply(this,arguments)};case 9:return function(e,n,r,s,i,o,a,l,u){return t.apply(this,arguments)};case 10:return function(e,n,r,s,i,o,a,l,u,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Xt(e,t,n){return function(){for(var r=[],s=0,i=e,o=0;o<t.length||s<arguments.length;){var a;o<t.length&&(!Ht(t[o])||s>=arguments.length)?a=t[o]:(a=arguments[s],s+=1),r[o]=a,Ht(a)||(i-=1),o+=1}return i<=0?n.apply(this,r):Jt(i,Xt(e,r,n))}}var Wt=Gt((function(e,t){return 1===e?Kt(t):Jt(e,Xt(e,[],t))}));function Yt(e){return function t(n,r,s){switch(arguments.length){case 0:return t;case 1:return Ht(n)?t:Gt((function(t,r){return e(n,t,r)}));case 2:return Ht(n)&&Ht(r)?t:Ht(n)?Gt((function(t,n){return e(t,r,n)})):Ht(r)?Gt((function(t,r){return e(n,t,r)})):Kt((function(t){return e(n,r,t)}));default:return Ht(n)&&Ht(r)&&Ht(s)?t:Ht(n)&&Ht(r)?Gt((function(t,n){return e(t,n,s)})):Ht(n)&&Ht(s)?Gt((function(t,n){return e(t,r,n)})):Ht(r)&&Ht(s)?Gt((function(t,r){return e(n,t,r)})):Ht(n)?Kt((function(t){return e(t,r,s)})):Ht(r)?Kt((function(t){return e(n,t,s)})):Ht(s)?Kt((function(t){return e(n,r,t)})):e(n,r,s)}}}var Qt=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function en(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function tn(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),s=r.pop();if(!Qt(s)){for(var i=0;i<e.length;){if("function"==typeof s[e[i]])return s[e[i]].apply(s,r);i+=1}if(en(s)){var o=t.apply(null,r);return o(s)}}return n.apply(this,arguments)}}var nn=function(){return this.xf["@@transducer/init"]()},rn=function(e){return this.xf["@@transducer/result"](e)};function sn(e){return"[object String]"===Object.prototype.toString.call(e)}var on=Kt((function(e){return!!Qt(e)||!!e&&("object"==typeof e&&(!sn(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))})),an=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();var ln=Gt((function(e,t){return Jt(e.length,(function(){return e.apply(t,arguments)}))})),un=ln;function cn(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function pn(e,t,n,r){return e["@@transducer/result"](n[r](un(e["@@transducer/step"],e),t))}var hn="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function fn(e,t,n){if("function"==typeof e&&(e=function(e){return new an(e)}(e)),on(n))return function(e,t,n){for(var r=0,s=n.length;r<s;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return pn(e,t,n,"fantasy-land/reduce");if(null!=n[hn])return cn(e,t,n[hn]());if("function"==typeof n.next)return cn(e,t,n);if("function"==typeof n.reduce)return pn(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var gn=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=nn,e.prototype["@@transducer/result"]=rn,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),dn=Gt((function(e,t){return new gn(e,t)}));function mn(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var yn=Object.prototype.toString,xn=function(){return"[object Arguments]"===yn.call(arguments)?function(e){return"[object Arguments]"===yn.call(e)}:function(e){return mn("callee",e)}}(),bn=xn,wn=!{toString:null}.propertyIsEnumerable("toString"),kn=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],vn=function(){return arguments.propertyIsEnumerable("length")}(),An=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},En="function"!=typeof Object.keys||vn?Kt((function(e){if(Object(e)!==e)return[];var t,n,r=[],s=vn&&bn(e);for(t in e)!mn(t,e)||s&&"length"===t||(r[r.length]=t);if(wn)for(n=kn.length-1;n>=0;)mn(t=kn[n],e)&&!An(r,t)&&(r[r.length]=t),n-=1;return r})):Kt((function(e){return Object(e)!==e?[]:Object.keys(e)})),Sn=En,$n=Gt(tn(["fantasy-land/map","map"],dn,(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return Wt(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return fn((function(n,r){return n[r]=e(t[r]),n}),{},Sn(t));default:return function(e,t){for(var n=0,r=t.length,s=Array(r);n<r;)s[n]=e(t[n]),n+=1;return s}(e,t)}}))),_n=$n,Tn=Number.isInteger||function(e){return e<<0===e},On=Gt((function(e,t){var n=e<0?t.length+e:e;return sn(t)?t.charAt(n):t[n]})),Mn=Gt((function(e,t){return e.map((function(e){for(var n,r=t,s=0;s<e.length;){if(null==r)return;n=e[s],r=Tn(n)?On(n,r):r[n],s+=1}return r}))})),Cn=Gt((function(e,t){return Mn([e],t)[0]})),zn=Gt((function(e,t){return Cn([e],t)})),In=Yt((function(e,t,n){var r={};for(var s in n)r[s]=n[s];return r[e]=t,r})),Rn=In,jn=Kt((function(e){return null==e})),Nn=Yt((function e(t,n,r){if(0===t.length)return n;var s=t[0];if(t.length>1){var i=!jn(r)&&mn(s,r)?r[s]:Tn(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,i)}if(Tn(s)&&Qt(r)){var o=[].concat(r);return o[s]=n,o}return Rn(s,n,r)})),Fn=Nn;var Pn=Kt((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function Ln(e,t,n,r){var s,i=function(s){for(var i=t.length,o=0;o<i;){if(e===t[o])return n[o];o+=1}for(var a in t[o+1]=e,n[o+1]=s,e)s[a]=r?Ln(e[a],t,n,!0):e[a];return s};switch(Pn(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return s=e,new RegExp(s.source,(s.global?"g":"")+(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.sticky?"y":"")+(s.unicode?"u":""));default:return e}}var qn=Kt((function(e){return null!=e&&"function"==typeof e.clone?e.clone():Ln(e,[],[],!0)}));function Bn(e,t){return function(){var n=arguments.length;if(0===n)return t();var r=arguments[n-1];return Qt(r)||"function"!=typeof r[e]?t.apply(this,arguments):r[e].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var Dn=Yt(Bn("slice",(function(e,t,n){return Array.prototype.slice.call(n,e,t)}))),Un=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=nn,e.prototype["@@transducer/result"]=rn,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var n,r=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?(n=r)&&n["@@transducer/reduced"]?n:{"@@transducer/value":n,"@@transducer/reduced":!0}:r},e}(),Zn=Gt(tn(["take"],Gt((function(e,t){return new Un(e,t)})),(function(e,t){return Dn(0,e<0?1/0:e,t)})));function Vn(e,t){return Zn(e<t.length?t.length-e:0,t)}var Hn=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=nn,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e}(),Kn=Gt(tn([],Gt((function(e,t){return new Hn(e,t)})),Vn)),Gn=Gt((function(e,t){return function(n){return function(r){return _n((function(e){return t(e,r)}),n(e(r)))}}})),Jn=Kt((function(e){return Gn(Cn(e),Fn(e))})),Xn=Kt((function(e){return Gn(zn(e),Rn(e))})),Wn=function(e){return{value:e,"fantasy-land/map":function(){return this}}},Yn=Gt((function(e,t){return e(Wn)(t).value})),Qn=Yn;const er=["done","not done"];Xn("startFrameId");const tr=Xn("frames");Xn("name");const nr=Object.freeze({single:"single",multiple:"multiple",diagnostic:"diagnostic",newTabAnswer:"newTabAnswer",answer:"answer",endConversation:"endConversation"});function rr(e="",t={}){for(const n of(e=>Object.values(Qn(tr,e)))(t))for(const t of n.slots)if(t.name===e)return t;return null}Xn("name");Xn("replies");const sr=new(0,Vt.Parser);function ir(e,t,n=null){return(r,s)=>{if(!r||Array.isArray(r))throw new cr("The first argument in a trigger formula must be a question name.");if(n&&!rr(r,n))throw new cr(`The question name "${r}" does not exist. Possibly a typo?\n       Correct typo or add ${r} to a tag so the trigger can evaluate it.`);if(!s||0==s.length)throw new cr(`Trigger formulas must have one or more indexes as the second argument\n        - check triggers that include ${r}`);const i=e[r];return!!i&&t(i,s)}}function or(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new Error("hasSameMembers() called with non-array argument");const n=[...e].sort(),r=[...t].sort();return n.length===r.length&&n.every(((e,t)=>e===r[t]))}function ar(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new Error("isSubSet() called with non-array argument");return e.every((e=>t.includes(e)))}function lr(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new Error("hasOneOrMoreSharedMember() called with non-array argument");for(let n of e)if(t.includes(n))return!0;return!1}function ur(e="",t=null){return t?view(((e,t)=>Jn(["replies",e,t]))(e,t),bot):view(Jn(["replies",e]),bot)}function cr(e){this.name="Trigger Missing Or Invalid",this.message=e,this.exampleHTMLStr="Example:<br>\n    slot.trigger: same('TOSAccepted', [0])<br><br>",this.stack=(new Error).stack}cr.prototype=new Error;const pr=Object.freeze({completed:"completed",invalidReply:"invalidReply",abandoned:"abandoned",chatAgent:"chatAgent",callAgent:"callAgent"});function hr(e,t,n){if(void 0===e||void 0===t||void 0===n)return console.log(`initConversation(): an argument is undefined: \n      bot:${e}\ncurrentFrame:${t}\nlocalStorageKey:${n}`),null;const r=(({frames:e=[],currentFrame:t=0,replies:n={},botCosmetics:r={}})=>({currentFrame:t,localeString:e[t].localeString,introduction:e[t].introduction,unSpokenFrames:qn(e),completedRounds:[],allReplyOptions:qn(n),botCosmetics:r}))({frames:e.frames,currentFrame:t,replies:e.replies,botCosmetics:e.botCosmetics});return te(r,n),r}function fr(e){const t=ee(e),n=t.unSpokenFrames[t.currentFrame].slots,r=function(e){let t={};return e.forEach((e=>{t[e.slot.name]=e.userReplyIndexes})),t}(t.completedRounds);sr.functions.same=ir(r,or),sr.functions.subset=ir(r,ar),sr.functions.share=ir(r,lr),sr.functions.reply=ir(r,ur);const s=function(e,t){return e.find((e=>{try{return""===e.trigger||void 0===e.trigger||"true"===e.trigger||function(e,t){if(!e)throw new cr("Trigger argument must not be empty.");if(0===Object.keys(t).length)throw new cr("Adding a trigger to the first slot is unnecessary since the first slot will always execute.");try{const n=sr.evaluate(e,t);if("boolean"==typeof n)return n;throw new cr(`Triggers must evaluate to true or false.  \n                                  "${e}" did not.`)}catch(t){throw console.log(t),new cr(`${t} in "${e}"`)}}(e.trigger,t)}catch(e){if("triggerMissingOrInvalidError"===e.name)return console.log(e),!1;throw e}}))}(n,r);if(void 0===s)return{completedRounds:qn(t.completedRounds),replyType:nr.endConversation,replyOptions:null};if(0===t.completedRounds.length||t.completedRounds.length>0&&s.name!==t.completedRounds[t.completedRounds.length-1].slot.name){const n=(({slot:e={},frameId:t="",userReplyValues:n=[],userReplyIndexes:r=[],ending:s="",stats:i={}})=>({slot:e,frameId:t,userReplyValues:n,userReplyIndexes:r,ending:s,stats:i}))({slot:qn(s),frameId:t.currentFrame});t.completedRounds.push(n),te(t,e)}return{completedRounds:qn(t.completedRounds),replyType:qn(s.type),replyOptions:qn(t.allReplyOptions[s.replyId])}}function gr(e,t){const n=e.unSpokenFrames[e.currentFrame].slots.findIndex((e=>e.name===t.slot.name));e.unSpokenFrames[e.currentFrame].slots.splice(n,1)}function dr({userReplyValues:e,userReplyIndexes:t,ending:n,stats:r,localStorageKey:s}){const i=ee(s),o=i.completedRounds[i.completedRounds.length-1];o.userReplyValues=e,o.userReplyIndexes=t,o.ending=n,o.stats=r,gr(i,o),te(i,s)}var mr={exports:{}};function yr(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}mr.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:yr,changeDefaults:function(e){mr.exports.defaults=e}};const xr=/[&<>"']/,br=/[&<>"']/g,wr=/[<>"']|&(?!#?\w+;)/,kr=/[<>"']|&(?!#?\w+;)/g,vr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ar=e=>vr[e];const Er=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Sr(e){return e.replace(Er,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const $r=/(^|[^\[])\^/g;const _r=/[^\w:]/g,Tr=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const Or={},Mr=/^[^:]+:\/*[^/]*$/,Cr=/^([^:]+:)[\s\S]*$/,zr=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Ir(e,t){Or[" "+e]||(Mr.test(e)?Or[" "+e]=e+"/":Or[" "+e]=Rr(e,"/",!0));const n=-1===(e=Or[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(Cr,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(zr,"$1")+t:e+t}function Rr(e,t,n){const r=e.length;if(0===r)return"";let s=0;for(;s<r;){const i=e.charAt(r-s-1);if(i!==t||n){if(i===t||!n)break;s++}else s++}return e.substr(0,r-s)}var jr={escape:function(e,t){if(t){if(xr.test(e))return e.replace(br,Ar)}else if(wr.test(e))return e.replace(kr,Ar);return e},unescape:Sr,edit:function(e,t){e=e.source||e,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace($r,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n},cleanUrl:function(e,t,n){if(e){let e;try{e=decodeURIComponent(Sr(n)).replace(_r,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!Tr.test(n)&&(n=Ir(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},resolveUrl:Ir,noopTest:{exec:function(){}},merge:function(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,s=t;for(;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:Rr,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,s=0;for(;s<n;s++)if("\\"===e[s])s++;else if(e[s]===t[0])r++;else if(e[s]===t[1]&&(r--,r<0))return s;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},repeatString:function(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}};const{defaults:Nr}=mr.exports,{rtrim:Fr,splitCells:Pr,escape:Lr,findClosingBracket:qr}=jr;function Br(e,t,n){const r=t.href,s=t.title?Lr(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:s,text:i}:{type:"image",raw:n,href:r,title:s,text:Lr(i)}}var Dr=class{constructor(e){this.options=e||Nr}space(e){const t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Fr(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=Fr(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e}}}nptable(e){const t=this.rules.block.nptable.exec(e);if(t){const e={type:"table",header:Pr(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(e.header.length===e.align.length){let t,n=e.align.length;for(t=0;t<n;t++)/^ *-+: *$/.test(e.align[t])?e.align[t]="right":/^ *:-+: *$/.test(e.align[t])?e.align[t]="center":/^ *:-+ *$/.test(e.align[t])?e.align[t]="left":e.align[t]=null;for(n=e.cells.length,t=0;t<n;t++)e.cells[t]=Pr(e.cells[t],e.header.length);return e}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:e}}}list(e){const t=this.rules.block.list.exec(e);if(t){let e=t[0];const n=t[2],r=n.length>1,s={type:"list",raw:e,ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]},i=t[0].match(this.rules.block.item);let o,a,l,u,c,p,h,f,g,d=!1,m=i.length;l=this.rules.block.listItemStart.exec(i[0]);for(let t=0;t<m;t++){if(o=i[t],e=o,this.options.pedantic||(g=o.match(new RegExp("\\n\\s*\\n {0,"+(l[0].length-1)+"}\\S")),g&&(c=o.length-g.index+i.slice(t+1).join("\n").length,s.raw=s.raw.substring(0,s.raw.length-c),o=o.substring(0,g.index),e=o,m=t+1)),t!==m-1){if(u=this.rules.block.listItemStart.exec(i[t+1]),this.options.pedantic?u[1].length>l[1].length:u[1].length>=l[0].length||u[1].length>3){i.splice(t,2,i[t]+(!this.options.pedantic&&u[1].length<l[0].length&&!i[t].match(/\n$/)?"":"\n")+i[t+1]),t--,m--;continue}(!this.options.pedantic||this.options.smartLists?u[2][u[2].length-1]!==n[n.length-1]:r===(1===u[2].length))&&(c=i.slice(t+1).join("\n").length,s.raw=s.raw.substring(0,s.raw.length-c),t=m-1),l=u}a=o.length,o=o.replace(/^ *([*+-]|\d+[.)]) ?/,""),~o.indexOf("\n ")&&(a-=o.length,o=this.options.pedantic?o.replace(/^ {1,4}/gm,""):o.replace(new RegExp("^ {1,"+a+"}","gm"),"")),o=Fr(o,"\n"),t!==m-1&&(e+="\n"),p=d||/\n\n(?!\s*$)/.test(e),t!==m-1&&(d="\n\n"===e.slice(-2),p||(p=d)),p&&(s.loose=!0),this.options.gfm&&(h=/^\[[ xX]\] /.test(o),f=void 0,h&&(f=" "!==o[1],o=o.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:e,task:h,checked:f,loose:p,text:o})}return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Lr(t[0]):t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:Pr(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,r=e.align.length;for(n=0;n<r;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(r=e.cells.length,n=0;n<r;n++)e.cells[n]=Pr(e.cells[n].replace(/^ *\| *| *\| *$/g,""),e.header.length);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0]}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Lr(t[1])}}tag(e,t,n){const r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Lr(r[0]):r[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=Fr(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=qr(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),Br(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0])}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return Br(n,e,n[0])}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const s=r[1]||r[2]||"";if(!s||s&&(""===n||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let s,i,o=n,a=0;const l="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));)if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],s)if(i=s.length,r[3]||r[4])o+=i;else if(!((r[5]||r[6])&&n%3)||(n+i)%3){if(o-=i,!(o>0))return i=Math.min(i,i+o+a),Math.min(n,i)%2?{type:"em",raw:e.slice(0,n+r.index+i+1),text:e.slice(1,n+r.index+i)}:{type:"strong",raw:e.slice(0,n+r.index+i+1),text:e.slice(2,n+r.index+i-1)}}else a+=i}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=Lr(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;return"@"===n[2]?(e=Lr(this.options.mangle?t(n[1]):n[1]),r="mailto:"+e):(e=Lr(n[1]),r=e),{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=Lr(this.options.mangle?t(n[0]):n[0]),r="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=Lr(n[0]),r="www."===n[1]?"http://"+e:e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t,n){const r=this.rules.inline.text.exec(e);if(r){let e;return e=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Lr(r[0]):r[0]:Lr(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:e}}}};const{noopTest:Ur,edit:Zr,merge:Vr}=jr,Hr={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Ur,table:Ur,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Hr.def=Zr(Hr.def).replace("label",Hr._label).replace("title",Hr._title).getRegex(),Hr.bullet=/(?:[*+-]|\d{1,9}[.)])/,Hr.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,Hr.item=Zr(Hr.item,"gm").replace(/bull/g,Hr.bullet).getRegex(),Hr.listItemStart=Zr(/^( *)(bull) */).replace("bull",Hr.bullet).getRegex(),Hr.list=Zr(Hr.list).replace(/bull/g,Hr.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Hr.def.source+")").getRegex(),Hr._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Hr._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Hr.html=Zr(Hr.html,"i").replace("comment",Hr._comment).replace("tag",Hr._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Hr.paragraph=Zr(Hr._paragraph).replace("hr",Hr.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hr._tag).getRegex(),Hr.blockquote=Zr(Hr.blockquote).replace("paragraph",Hr.paragraph).getRegex(),Hr.normal=Vr({},Hr),Hr.gfm=Vr({},Hr.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Hr.gfm.nptable=Zr(Hr.gfm.nptable).replace("hr",Hr.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hr._tag).getRegex(),Hr.gfm.table=Zr(Hr.gfm.table).replace("hr",Hr.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hr._tag).getRegex(),Hr.pedantic=Vr({},Hr.normal,{html:Zr("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Hr._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ur,paragraph:Zr(Hr.normal._paragraph).replace("hr",Hr.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Hr.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Kr={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ur,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ur,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Kr.punctuation=Zr(Kr.punctuation).replace(/punctuation/g,Kr._punctuation).getRegex(),Kr.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Kr.escapedEmSt=/\\\*|\\_/g,Kr._comment=Zr(Hr._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Kr.emStrong.lDelim=Zr(Kr.emStrong.lDelim).replace(/punct/g,Kr._punctuation).getRegex(),Kr.emStrong.rDelimAst=Zr(Kr.emStrong.rDelimAst,"g").replace(/punct/g,Kr._punctuation).getRegex(),Kr.emStrong.rDelimUnd=Zr(Kr.emStrong.rDelimUnd,"g").replace(/punct/g,Kr._punctuation).getRegex(),Kr._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Kr._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Kr._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Kr.autolink=Zr(Kr.autolink).replace("scheme",Kr._scheme).replace("email",Kr._email).getRegex(),Kr._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Kr.tag=Zr(Kr.tag).replace("comment",Kr._comment).replace("attribute",Kr._attribute).getRegex(),Kr._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Kr._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Kr._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Kr.link=Zr(Kr.link).replace("label",Kr._label).replace("href",Kr._href).replace("title",Kr._title).getRegex(),Kr.reflink=Zr(Kr.reflink).replace("label",Kr._label).getRegex(),Kr.reflinkSearch=Zr(Kr.reflinkSearch,"g").replace("reflink",Kr.reflink).replace("nolink",Kr.nolink).getRegex(),Kr.normal=Vr({},Kr),Kr.pedantic=Vr({},Kr.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Zr(/^!?\[(label)\]\((.*?)\)/).replace("label",Kr._label).getRegex(),reflink:Zr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Kr._label).getRegex()}),Kr.gfm=Vr({},Kr.normal,{escape:Zr(Kr.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Kr.gfm.url=Zr(Kr.gfm.url,"i").replace("email",Kr.gfm._extended_email).getRegex(),Kr.breaks=Vr({},Kr.gfm,{br:Zr(Kr.br).replace("{2,}","*").getRegex(),text:Zr(Kr.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Gr={block:Hr,inline:Kr};const Jr=Dr,{defaults:Xr}=mr.exports,{block:Wr,inline:Yr}=Gr,{repeatString:Qr}=jr;function es(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function ts(e){let t,n,r="";const s=e.length;for(t=0;t<s;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}const{defaults:ns}=mr.exports,{cleanUrl:rs,escape:ss}=jr;var is=class{constructor(e){this.options=e||ns}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+ss(r,!0)+'">'+(n?e:ss(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:ss(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=rs(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+ss(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=rs(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}},os=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}},as=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++,n=e+"-"+r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}};const ls=is,us=os,cs=as,{defaults:ps}=mr.exports,{unescape:hs}=jr;const fs=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Xr,this.options.tokenizer=this.options.tokenizer||new Jr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;const t={block:Wr.normal,inline:Yr.normal};this.options.pedantic?(t.block=Wr.pedantic,t.inline=Yr.pedantic):this.options.gfm&&(t.block=Wr.gfm,this.options.breaks?t.inline=Yr.breaks:t.inline=Yr.gfm),this.tokenizer.rules=t}static get rules(){return{block:Wr,inline:Yr}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens}blockTokens(e,t=[],n=!0){let r,s,i,o,a,l;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(r=n.call(this,e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))))if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e))e=e.substring(r.raw.length),o=t[t.length-1],o&&"paragraph"===o.type?(o.raw+="\n"+r.raw,o.text+="\n"+r.text):t.push(r);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),i=r.items.length,s=0;s<i;s++)r.items[s].tokens=this.blockTokens(r.items[s].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else{if(a=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call(this,n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(a=e.substring(0,t+1))}if(n&&(r=this.tokenizer.paragraph(a)))o=t[t.length-1],l&&"paragraph"===o.type?(o.raw+="\n"+r.raw,o.text+="\n"+r.text):t.push(r),l=a.length!==e.length,e=e.substring(r.raw.length);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),o=t[t.length-1],o&&"text"===o.type?(o.raw+="\n"+r.raw,o.text+="\n"+r.text):t.push(r);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}inline(e){let t,n,r,s,i,o;const a=e.length;for(t=0;t<a;t++)switch(o=e[t],o.type){case"paragraph":case"text":case"heading":o.tokens=[],this.inlineTokens(o.text,o.tokens);break;case"table":for(o.tokens={header:[],cells:[]},s=o.header.length,n=0;n<s;n++)o.tokens.header[n]=[],this.inlineTokens(o.header[n],o.tokens.header[n]);for(s=o.cells.length,n=0;n<s;n++)for(i=o.cells[n],o.tokens.cells[n]=[],r=0;r<i.length;r++)o.tokens.cells[n][r]=[],this.inlineTokens(i[r],o.tokens.cells[n][r]);break;case"blockquote":this.inline(o.tokens);break;case"list":for(s=o.items.length,n=0;n<s;n++)this.inline(o.items[n].tokens)}return e}inlineTokens(e,t=[],n=!1,r=!1){let s,i,o,a,l,u,c=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(c));)e.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,a.index)+"["+Qr("a",a[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,a.index)+"["+Qr("a",a[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,a.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((n=>!!(s=n.call(this,e,t))&&(e=e.substring(s.raw.length),t.push(s),!0)))))if(s=this.tokenizer.escape(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.tag(e,n,r))e=e.substring(s.raw.length),n=s.inLink,r=s.inRawBlock,i=t[t.length-1],i&&"text"===s.type&&"text"===i.type?(i.raw+=s.raw,i.text+=s.text):t.push(s);else if(s=this.tokenizer.link(e))e=e.substring(s.raw.length),"link"===s.type&&(s.tokens=this.inlineTokens(s.text,[],!0,r)),t.push(s);else if(s=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(s.raw.length),i=t[t.length-1],"link"===s.type?(s.tokens=this.inlineTokens(s.text,[],!0,r),t.push(s)):i&&"text"===s.type&&"text"===i.type?(i.raw+=s.raw,i.text+=s.text):t.push(s);else if(s=this.tokenizer.emStrong(e,c,u))e=e.substring(s.raw.length),s.tokens=this.inlineTokens(s.text,[],n,r),t.push(s);else if(s=this.tokenizer.codespan(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.br(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.del(e))e=e.substring(s.raw.length),s.tokens=this.inlineTokens(s.text,[],n,r),t.push(s);else if(s=this.tokenizer.autolink(e,ts))e=e.substring(s.raw.length),t.push(s);else if(n||!(s=this.tokenizer.url(e,ts))){if(o=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call(this,n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}if(s=this.tokenizer.inlineText(o,r,es))e=e.substring(s.raw.length),"_"!==s.raw.slice(-1)&&(u=s.raw.slice(-1)),l=!0,i=t[t.length-1],i&&"text"===i.type?(i.raw+=s.raw,i.text+=s.text):t.push(s);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(s.raw.length),t.push(s);return t}},gs=class e{constructor(e){this.options=e||ps,this.options.renderer=this.options.renderer||new ls,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new us,this.slugger=new cs}static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e,t=!0){let n,r,s,i,o,a,l,u,c,p,h,f,g,d,m,y,x,b,w,k="";const v=e.length;for(n=0;n<v;n++)if(p=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(w=this.options.extensions.renderers[p.type].call(this,p),!1!==w||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type)))k+=w||"";else switch(p.type){case"space":continue;case"hr":k+=this.renderer.hr();continue;case"heading":k+=this.renderer.heading(this.parseInline(p.tokens),p.depth,hs(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue;case"code":k+=this.renderer.code(p.text,p.lang,p.escaped);continue;case"table":for(u="",l="",i=p.header.length,r=0;r<i;r++)l+=this.renderer.tablecell(this.parseInline(p.tokens.header[r]),{header:!0,align:p.align[r]});for(u+=this.renderer.tablerow(l),c="",i=p.cells.length,r=0;r<i;r++){for(a=p.tokens.cells[r],l="",o=a.length,s=0;s<o;s++)l+=this.renderer.tablecell(this.parseInline(a[s]),{header:!1,align:p.align[s]});c+=this.renderer.tablerow(l)}k+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(p.tokens),k+=this.renderer.blockquote(c);continue;case"list":for(h=p.ordered,f=p.start,g=p.loose,i=p.items.length,c="",r=0;r<i;r++)m=p.items[r],y=m.checked,x=m.task,d="",m.task&&(b=this.renderer.checkbox(y),g?m.tokens.length>0&&"text"===m.tokens[0].type?(m.tokens[0].text=b+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=b+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:b}):d+=b),d+=this.parse(m.tokens,g),c+=this.renderer.listitem(d,x,y);k+=this.renderer.list(c,h,f);continue;case"html":k+=this.renderer.html(p.text);continue;case"paragraph":k+=this.renderer.paragraph(this.parseInline(p.tokens));continue;case"text":for(c=p.tokens?this.parseInline(p.tokens):p.text;n+1<v&&"text"===e[n+1].type;)p=e[++n],c+="\n"+(p.tokens?this.parseInline(p.tokens):p.text);k+=t?this.renderer.paragraph(c):c;continue;default:{const e='Token with "'+p.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return k}parseInline(e,t){t=t||this.renderer;let n,r,s,i="";const o=e.length;for(n=0;n<o;n++)if(r=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(s=this.options.extensions.renderers[r.type].call(this,r),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))i+=s||"";else switch(r.type){case"escape":case"text":i+=t.text(r.text);break;case"html":i+=t.html(r.text);break;case"link":i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":i+=t.image(r.href,r.title,r.text);break;case"strong":i+=t.strong(this.parseInline(r.tokens,t));break;case"em":i+=t.em(this.parseInline(r.tokens,t));break;case"codespan":i+=t.codespan(r.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(r.tokens,t));break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return i}},ds=Dr,ms=is,ys=os,xs=as,{merge:bs,checkSanitizeDeprecation:ws,escape:ks}=jr,{getDefaults:vs,changeDefaults:As,defaults:Es}=mr.exports;function Ss(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=bs({},Ss.defaults,t||{}),ws(t),n){const r=t.highlight;let s;try{s=fs.lex(e,t)}catch(e){return n(e)}const i=function(e){let i;if(!e)try{t.walkTokens&&Ss.walkTokens(s,t.walkTokens),i=gs.parse(s,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,i)};if(!r||r.length<3)return i();if(delete t.highlight,!s.length)return i();let o=0;return Ss.walkTokens(s,(function(e){"code"===e.type&&(o++,setTimeout((()=>{r(e.text,e.lang,(function(t,n){if(t)return i(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),o--,0===o&&i()}))}),0))})),void(0===o&&i())}try{const n=fs.lex(e,t);return t.walkTokens&&Ss.walkTokens(n,t.walkTokens),gs.parse(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ks(e.message+"",!0)+"</pre>";throw e}}Ss.options=Ss.setOptions=function(e){return bs(Ss.defaults,e),As(Ss.defaults),Ss},Ss.getDefaults=vs,Ss.defaults=Es,Ss.use=function(...e){const t=bs({},...e),n=Ss.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach((e=>{if(e.extensions&&(r=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=n.renderers?n.renderers[e.name]:null;n.renderers[e.name]=t?function(...n){let r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");n[e.level]?n[e.level].unshift(e.tokenizer):n[e.level]=[e.tokenizer],e.start&&("block"===e.level?n.startBlock?n.startBlock.push(e.start):n.startBlock=[e.start]:"inline"===e.level&&(n.startInline?n.startInline.push(e.start):n.startInline=[e.start]))}e.childTokens&&(n.childTokens[e.name]=e.childTokens)}))),e.renderer){const n=Ss.defaults.renderer||new ms;for(const t in e.renderer){const r=n[t];n[t]=(...s)=>{let i=e.renderer[t].apply(n,s);return!1===i&&(i=r.apply(n,s)),i}}t.renderer=n}if(e.tokenizer){const n=Ss.defaults.tokenizer||new ds;for(const t in e.tokenizer){const r=n[t];n[t]=(...s)=>{let i=e.tokenizer[t].apply(n,s);return!1===i&&(i=r.apply(n,s)),i}}t.tokenizer=n}if(e.walkTokens){const n=Ss.defaults.walkTokens;t.walkTokens=t=>{e.walkTokens.call(this,t),n&&n(t)}}r&&(t.extensions=n),Ss.setOptions(t)}))},Ss.walkTokens=function(e,t){for(const n of e)switch(t(n),n.type){case"table":for(const e of n.tokens.header)Ss.walkTokens(e,t);for(const e of n.tokens.cells)for(const n of e)Ss.walkTokens(n,t);break;case"list":Ss.walkTokens(n.items,t);break;default:Ss.defaults.extensions&&Ss.defaults.extensions.childTokens&&Ss.defaults.extensions.childTokens[n.type]?Ss.defaults.extensions.childTokens[n.type].forEach((function(e){Ss.walkTokens(n[e],t)})):n.tokens&&Ss.walkTokens(n.tokens,t)}},Ss.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=bs({},Ss.defaults,t||{}),ws(t);try{const n=fs.lexInline(e,t);return t.walkTokens&&Ss.walkTokens(n,t.walkTokens),gs.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ks(e.message+"",!0)+"</pre>";throw e}},Ss.Parser=gs,Ss.parser=gs.parse,Ss.Renderer=ms,Ss.TextRenderer=ys,Ss.Lexer=fs,Ss.lexer=fs.lex,Ss.Tokenizer=ds,Ss.Slugger=xs,Ss.parse=Ss;var $s=Ss;function _s(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Ts(e,t,n){const r=e.slice();return r[14]=t[n],r}function Os(e,t,n){const r=e.slice();return r[17]=t[n],r[18]=t,r[19]=n,r}function Ms(e){let t,n=e[3],r=[];for(let t=0;t<n.length;t+=1)r[t]=zs(Os(e,n,t));return{c(){t=p("ul");for(let e=0;e<r.length;e+=1)r[e].c();m(t,"class","mb-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"),m(t,"tabindex","-1"),m(t,"role","listbox"),m(t,"aria-labelledby","listbox-label"),m(t,"aria-activedescendant","listbox-option-3")},m(e,n){l(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,s){if(24&s){let i;for(n=e[3],i=0;i<n.length;i+=1){const o=Os(e,n,i);r[i]?r[i].p(o,s):(r[i]=zs(o),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(e){e&&u(t),c(r,e)}}}function Cs(e){let t,n;return{c(){t=h("svg"),n=h("path"),m(n,"fill-rule","evenodd"),m(n,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),m(n,"clip-rule","evenodd"),m(t,"class","h-5 w-5"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 20 20"),m(t,"fill","currentColor"),m(t,"aria-hidden","true")},m(e,r){l(e,t,r),a(t,n)},d(e){e&&u(t)}}}function zs(e){let t,n,r,i,o,c,h,x,b=e[17].value+"",k=e[17].selected&&Cs();function v(){return e[8](e[17],e[18],e[19])}function A(){return e[9](e[17],e[18],e[19])}function E(){return e[10](e[19])}return{c(){t=p("li"),n=p("span"),r=f(b),i=g(),o=p("span"),k&&k.c(),c=g(),m(n,"class","font-normal block truncate"),w(n,"font-semibold",e[17].selected),m(o,"class","text-gray-600 absolute inset-y-0 left-0 flex items-center pl-1.5"),w(o,"text-white",!0===e[17].highlighted),m(t,"class","text-gray-900 cursor-default select-none relative py-2 pl-8 pr-4 svelte-n5we1s"),m(t,"id","listbox-option-0"),m(t,"role","option"),w(t,"highlightedOption",!0===e[17].highlighted)},m(e,s){l(e,t,s),a(t,n),a(n,r),a(t,i),a(t,o),k&&k.m(o,null),a(t,c),h||(x=[d(t,"mouseenter",v),d(t,"mouseleave",A),d(t,"click",E)],h=!0)},p(s,i){e=s,8&i&&b!==(b=e[17].value+"")&&y(r,b),8&i&&w(n,"font-semibold",e[17].selected),e[17].selected?k||(k=Cs(),k.c(),k.m(o,null)):k&&(k.d(1),k=null),8&i&&w(o,"text-white",!0===e[17].highlighted),8&i&&w(t,"highlightedOption",!0===e[17].highlighted)},d(e){e&&u(t),k&&k.d(),h=!1,s(x)}}}function Is(e){let t,n,r,s,i,o,c,h,x=e[1][e[14]]+"";function b(){return e[11](e[14])}return{c(){t=p("li"),n=p("span"),r=f(x),s=g(),i=p("span"),i.innerHTML='<svg class="fill-current h-6 w-6 " role="button" viewBox="0 0 20 20"><path d="M14.348,14.849c-0.469,0.469-1.229,0.469-1.697,0L10,11.819l-2.651,3.029c-0.469,0.469-1.229,0.469-1.697,0\n                                           c-0.469-0.469-0.469-1.229,0-1.697l2.758-3.15L5.651,6.849c-0.469-0.469-0.469-1.228,0-1.697s1.228-0.469,1.697,0L10,8.183\n                                           l2.651-3.031c0.469-0.469,1.228-0.469,1.697,0s0.469,1.229,0,1.697l-2.758,3.152l2.758,3.15\n                                           C14.817,13.62,14.817,14.38,14.348,14.849z"></path></svg>',o=g(),m(n,"class","font-normal block truncate"),m(i,"class","text-gray-600 absolute inset-y-0 left-0 flex items-center pl-1.5"),m(t,"class","text-gray-900 cursor-default block select-none relative py-1 pl-8 pr-4"),m(t,"id","listbox-option-0"),m(t,"role","option")},m(e,u){l(e,t,u),a(t,n),a(n,r),a(t,s),a(t,i),a(t,o),c||(h=d(i,"click",b),c=!0)},p(t,n){e=t,3&n&&x!==(x=e[1][e[14]]+"")&&y(r,x)},d(e){e&&u(t),c=!1,h()}}}function Rs(e){let t;return{c(){t=p("div"),t.textContent="Select one or more options",m(t,"class","flex-1 text-gray-800 h-full w-full p-1 px-2 pl-3")},m(e,n){l(e,t,n)},d(e){e&&u(t)}}}function js(e){let t;return{c(){t=p("span"),t.innerHTML='<svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',m(t,"class","absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none")},m(e,n){l(e,t,n)},d(e){e&&u(t)}}}function Ns(e){let n,r,s;return{c(){n=p("button"),n.textContent="Done",m(n,"class","mt-3 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent shadow-sm font-medium rounded-md text-white bg-primary-color hover:bg-hover-color focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-color")},m(t,i){l(t,n,i),r||(s=d(n,"click",e[6]),r=!0)},p:t,d(e){e&&u(n),r=!1,s()}}}function Fs(e){let n,r,o,h,f,y,x,b,w,k=e[2]&&Ms(e),v=e[0],A=[];for(let t=0;t<v.length;t+=1)A[t]=Is(Ts(e,v,t));let E=0===e[0].length&&Rs(),S=!e[2]&&0===e[0].length&&js(),$=0!==e[0].length&&Ns(e);return{c(){n=p("div"),k&&k.c(),r=g(),o=p("button"),h=p("ul");for(let e=0;e<A.length;e+=1)A[e].c();f=g(),E&&E.c(),y=g(),S&&S.c(),x=g(),$&&$.c(),m(h,"class","bg-white max-h-60 py-0 text-base overflow-auto focus:outline-none sm:text-sm"),m(h,"tabindex","-1"),m(h,"role","listbox"),m(h,"aria-labelledby","listbox-label"),m(h,"aria-activedescendant","listbox-option-3"),m(o,"type","button"),m(o,"class","w-full bg-white border border-gray-300 rounded-md shadow-sm pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-primary-color focus:border-gray-500 sm:text-sm"),m(o,"aria-haspopup","listbox"),m(o,"aria-expanded","true"),m(o,"aria-labelledby","listbox-label"),m(n,"class","mt-1 relative sm:max-w-xs flex flex-col")},m(s,u){l(s,n,u),k&&k.m(n,null),a(n,r),a(n,o),a(o,h);for(let e=0;e<A.length;e+=1)A[e].m(h,null);var c;a(o,f),E&&E.m(o,null),a(o,y),S&&S.m(o,null),a(n,x),$&&$.m(n,null),b||(w=[d(o,"click",e[12]),(c=_s.call(null,n),c&&i(c.destroy)?c.destroy:t),d(n,"click_outside",e[7])],b=!0)},p(e,[t]){if(e[2]?k?k.p(e,t):(k=Ms(e),k.c(),k.m(n,r)):k&&(k.d(1),k=null),35&t){let n;for(v=e[0],n=0;n<v.length;n+=1){const r=Ts(e,v,n);A[n]?A[n].p(r,t):(A[n]=Is(r),A[n].c(),A[n].m(h,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=v.length}0===e[0].length?E||(E=Rs(),E.c(),E.m(o,y)):E&&(E.d(1),E=null),e[2]||0!==e[0].length?S&&(S.d(1),S=null):S||(S=js(),S.c(),S.m(o,null)),0!==e[0].length?$?$.p(e,t):($=Ns(e),$.c(),$.m(n,null)):$&&($.d(1),$=null)},i:t,o:t,d(e){e&&u(n),k&&k.d(),c(A,e),E&&E.d(),S&&S.d(),$&&$.d(),b=!1,s(w)}}}function Ps(e,t,n){const r=E();let{selectedReplyIndexes:s=[]}=t,{replyOptions:i}=t,o=!1;const a=i.map(((e,t)=>({value:e,selected:!1})));function l(e){a[e].selected?u(e):(s.push(e),n(0,s),n(3,a[e].selected=!0,a),n(3,a))}function u(e){s.splice(s.indexOf(e),1),n(0,s),n(3,a[e].selected=!1,a),n(3,a),console.log(`removed ${e}`),console.log(s.length)}return e.$$set=e=>{"selectedReplyIndexes"in e&&n(0,s=e.selectedReplyIndexes),"replyOptions"in e&&n(1,i=e.replyOptions)},[s,i,o,a,l,u,function(){r("message",s)},function(e){n(2,o=!1)},(e,t,r)=>n(3,t[r].highlighted=!0,a),(e,t,r)=>n(3,t[r].highlighted=!1,a),e=>l(e),e=>u(e),()=>n(2,o=!o)]}class Ls extends K{constructor(e){super(),H(this,e,Ps,Fs,o,{selectedReplyIndexes:0,replyOptions:1})}}function qs(e,t,n){const r=e.slice();return r[38]=t[n],r[40]=n,r}function Bs(e,t,n){const r=e.slice();return r[38]=t[n],r[40]=n,r}function Ds(e,t,n){const r=e.slice();return r[42]=t[n].slot,r[43]=t[n].userReplyValues,r[45]=n,r}function Us(e){let n;return{c(){n=p("h2"),n.textContent="Unknown error"},m(e,t){l(e,n,t)},p:t,i:t,o:t,d(e){e&&u(n)}}}function Zs(e){let n;return{c(){n=p("button"),n.innerHTML='<svg class="animate-spin h-5 w-5 mr-3" viewBox="0 0 24 24"></svg>\n    Loading',m(n,"type","button"),m(n,"class","bg-primary-600"),n.disabled=!0},m(e,t){l(e,n,t)},p:t,i:t,o:t,d(e){e&&u(n)}}}function Vs(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Hs(e){let n,r,s;return{c(){n=p("h2"),r=f("Bot failed to load: "),s=f(e[9]),m(n,"class","text-gray text-lg")},m(e,t){l(e,n,t),a(n,r),a(n,s)},p(e,t){512&t[0]&&y(s,e[9])},i:t,o:t,d(e){e&&u(n)}}}function Ks(e){let t,n,r,s,i,o,h,f,d,y,x,b,w,k,v,A=$s(e[8])+"",E=$s(e[1][e[1].length-1].slot.ask)+"",S=e[1].slice(0,-1),$=[];for(let t=0;t<S.length;t+=1)$[t]=Js(Ds(e,S,t));const _=[ti,ei,Qs,Ys,Ws,Xs],T=[];function O(e,t){return e[4]===nr.diagnostic||e[4]===nr.single&&e[2][0]===er[0]?0:e[4]===nr.single?1:e[4]===nr.multiple?2:"freeTextEntry"===e[4]?3:e[4]===nr.endConversation?4:"answer"!==e[4]?5:-1}~(b=O(e))&&(w=T[b]=_[b](e));let M=e[13]&&function(e){let t,n,r;return{c(){t=p("hr"),n=g(),r=p("div"),m(t,"class","mt-4")},m(e,s){l(e,t,s),l(e,n,s),l(e,r,s)},d(e){e&&u(t),e&&u(n),e&&u(r)}}}();return{c(){t=p("div"),n=p("div"),r=p("div"),s=g();for(let e=0;e<$.length;e+=1)$[e].c();i=g(),o=p("div"),h=p("div"),f=p("p"),d=g(),y=p("div"),x=p("div"),w&&w.c(),k=g(),M&&M.c(),m(r,"id","frameIntroduction"),m(n,"id","conversationHistory"),m(n,"class","flex flex-col space-y-4 mb-4"),m(f,"class","text-l"),m(h,"id","currentAsk"),m(h,"class","mr-4 sm:mr-12"),m(x,"id","user-reply-div"),m(x,"class","sm:ml-6 mt-2"),m(y,"id","currentUserReply"),m(o,"id","currentRound"),m(o,"class","sm:space-y-5 bg-white border-solid border border-gray-200 rounded-lg p-3"),m(t,"id","botContainer"),m(t,"class","container mx-auto border bg-container-color rounded p-2 sm:p-6 w-auto max-w-xl")},m(e,u){l(e,t,u),a(t,n),a(n,r),r.innerHTML=A,a(n,s);for(let e=0;e<$.length;e+=1)$[e].m(n,null);a(t,i),a(t,o),a(o,h),a(h,f),f.innerHTML=E,a(o,d),a(o,y),a(y,x),~b&&T[b].m(x,null),a(t,k),M&&M.m(t,null),v=!0},p(e,t){if((!v||256&t[0])&&A!==(A=$s(e[8])+"")&&(r.innerHTML=A),65538&t[0]){let r;for(S=e[1].slice(0,-1),r=0;r<S.length;r+=1){const s=Ds(e,S,r);$[r]?$[r].p(s,t):($[r]=Js(s),$[r].c(),$[r].m(n,null))}for(;r<$.length;r+=1)$[r].d(1);$.length=S.length}(!v||2&t[0])&&E!==(E=$s(e[1][e[1].length-1].slot.ask)+"")&&(f.innerHTML=E);let s=b;b=O(e),b===s?~b&&T[b].p(e,t):(w&&(q(),U(T[s],1,1,(()=>{T[s]=null})),B()),~b?(w=T[b],w?w.p(e,t):(w=T[b]=_[b](e),w.c()),D(w,1),w.m(x,null)):w=null)},i(e){v||(D(w),v=!0)},o(e){U(w),v=!1},d(e){e&&u(t),c($,e),~b&&T[b].d(),M&&M.d()}}}function Gs(e){let t,n,r,s,i,o,c,x,b=e[43].join(", ")+"";function w(){return e[24](e[45])}return{c(){t=p("div"),n=p("p"),r=f(b),s=g(),i=h("svg"),o=h("path"),m(o,"d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"),m(i,"xmlns","http://www.w3.org/2000/svg"),m(i,"class","inline-block ml-3 h-5 w-5 text-gray-400 hover:text-gray-800"),m(i,"viewBox","0 0 20 20"),m(i,"fill","currentColor"),m(n,"class","mx-4 border-b-2 border-gray-300 text-base inline-block hover:text-gray-800"),m(t,"id","user-reply-buttons-completed"),m(t,"class","mt-2")},m(e,u){l(e,t,u),a(t,n),a(n,r),a(n,s),a(n,i),a(i,o),c||(x=d(n,"click",w),c=!0)},p(t,n){e=t,2&n[0]&&b!==(b=e[43].join(", ")+"")&&y(r,b)},d(e){e&&u(t),c=!1,x()}}}function Js(e){let t,n,r,s,i=$s(e[42].ask)+"",o=e[43].length>0&&Gs(e);return{c(){t=p("div"),n=p("p"),r=g(),o&&o.c(),s=g(),m(n,"id","bot-ask-text-completed"),m(n,"class","text-l mr-4 sm:mr-12 "),m(t,"class","flex flex-col text-gray-400 bg-white border-solid border border-gray-200 rounded-lg p-3")},m(e,u){l(e,t,u),a(t,n),n.innerHTML=i,a(t,r),o&&o.m(t,null),a(t,s)},p(e,r){2&r[0]&&i!==(i=$s(e[42].ask)+"")&&(n.innerHTML=i),e[43].length>0?o?o.p(e,r):(o=Gs(e),o.c(),o.m(t,s)):o&&(o.d(1),o=null)},d(e){e&&u(t),o&&o.d()}}}function Xs(e){let n,r,s,i;return{c(){n=p("p"),r=f("Error: unsupported reply type of "),s=f(e[4]),i=f(" received"),m(n,"class","my-2")},m(e,t){l(e,n,t),a(n,r),a(n,s),a(n,i)},p(e,t){16&t[0]&&y(s,e[4])},i:t,o:t,d(e){e&&u(n)}}}function Ws(e){let n;return{c(){n=p("p"),n.textContent="End of conversation",m(n,"class","my-2")},m(e,t){l(e,n,t)},p:t,i:t,o:t,d(e){e&&u(n)}}}function Ys(e){let n,r,i,o,c,h,b,w,k,v,A;return{c(){n=p("div"),r=p("input"),i=g(),o=p("button"),o.textContent="Go",c=g(),h=p("span"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>',b=g(),w=p("p"),k=f(e[7]),m(r,"type","text"),m(r,"size","50"),m(h,"class","askIcon"),m(n,"class","my-2")},m(t,s){l(t,n,s),a(n,r),x(r,e[6]),a(n,i),a(n,o),a(n,c),a(n,h),a(n,b),a(n,w),a(w,k),v||(A=[d(r,"input",e[28]),d(r,"keyup",e[29]),d(o,"click",e[18]),d(h,"click",e[30])],v=!0)},p(e,t){64&t[0]&&r.value!==e[6]&&x(r,e[6]),128&t[0]&&y(k,e[7])},i:t,o:t,d(e){e&&u(n),v=!1,s(A)}}}function Qs(e){let t,n;return t=new Ls({props:{replyOptions:e[2]}}),t.$on("message",e[15]),{c(){!function(e){e&&e.c()}(t.$$.fragment)},m(e,r){Z(t,e,r),n=!0},p(e,n){const r={};4&n[0]&&(r.replyOptions=e[2]),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){U(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function ei(e){let n,r,i,o,h,f,y,x=e[2],w=[];for(let t=0;t<x.length;t+=1)w[t]=ni(qs(e,x,t));return{c(){n=p("div"),r=p("div"),i=p("select");for(let e=0;e<w.length;e+=1)w[e].c();o=g(),h=p("button"),h.textContent="Done",m(i,"class","block w-full pl-2 pr-10 text-base font-medium border-gray-300 focus:outline-none focus:ring-primary-color sm:text-sm rounded-md"),void 0===e[5]&&I((()=>e[26].call(i))),m(r,"class","w-full sm:max-w-xs"),m(h,"type","button"),m(h,"class","mt-3 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm shadow-sm text-white bg-primary-color hover:bg-hover-color focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-hover-color"),m(n,"class","sm:flex sm:items-center")},m(t,s){l(t,n,s),a(n,r),a(r,i);for(let e=0;e<w.length;e+=1)w[e].m(i,null);b(i,e[5]),a(n,o),a(n,h),f||(y=[d(i,"change",e[26]),d(h,"click",e[27])],f=!0)},p(e,t){if(4&t[0]){let n;for(x=e[2],n=0;n<x.length;n+=1){const r=qs(e,x,n);w[n]?w[n].p(r,t):(w[n]=ni(r),w[n].c(),w[n].m(i,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=x.length}32&t[0]&&b(i,e[5])},i:t,o:t,d(e){e&&u(n),c(w,e),f=!1,s(y)}}}function ti(e){let n,r,s=e[17](e[2]),i=[];for(let t=0;t<s.length;t+=1)i[t]=ri(Bs(e,s,t));return{c(){n=p("div"),r=p("div");for(let e=0;e<i.length;e+=1)i[e].c();m(r,"class","w-full sm:max-w-xs"),m(n,"class","sm:flex sm:items-center")},m(e,t){l(e,n,t),a(n,r);for(let e=0;e<i.length;e+=1)i[e].m(r,null)},p(e,t){if(147460&t[0]){let n;for(s=e[17](e[2]),n=0;n<s.length;n+=1){const o=Bs(e,s,n);i[n]?i[n].p(o,t):(i[n]=ri(o),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},i:t,o:t,d(e){e&&u(n),c(i,e)}}}function ni(e){let t,n,r,s=e[38]+"";return{c(){t=p("option"),n=f(s),t.__value=r=e[40],t.value=t.__value},m(e,r){l(e,t,r),a(t,n)},p(e,t){4&t[0]&&s!==(s=e[38]+"")&&y(n,s)},d(e){e&&u(t)}}}function ri(e){let t,n,r,s,i,o,c=e[38]+"";function h(){return e[25](e[38],e[40])}return{c(){t=p("button"),n=f(c),r=g(),m(t,"type","button"),m(t,"class","w-full inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md sm:w-auto sm:text-sm shadow-sm text-white bg-primary-color hover:bg-hover-color focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-hover-color"),m(t,"id",s="reply-"+e[40])},m(e,s){l(e,t,s),a(t,n),a(t,r),i||(o=d(t,"click",h),i=!0)},p(t,r){e=t,4&r[0]&&c!==(c=e[38]+"")&&y(n,c)},d(e){e&&u(t),i=!1,o()}}}function si(e){let t,n,r,s;const i=[Ks,Hs,Vs,Zs,Us],o=[];function a(e,t){return e[10]&&!e[12]?0:e[12]?1:e[0]?2:e[11]?3:4}return t=a(e),n=o[t]=i[t](e),{c(){n.c(),r=f("")},m(e,n){o[t].m(e,n),l(e,r,n),s=!0},p(e,s){let l=t;t=a(e),t===l?o[t].p(e,s):(q(),U(o[l],1,1,(()=>{o[l]=null})),B(),n=o[t],n?n.p(e,s):(n=o[t]=i[t](e),n.c()),D(n,1),n.m(r.parentNode,r))},i(e){s||(D(n),s=!0)},o(e){U(n),s=!1},d(e){o[t].d(e),e&&u(r)}}}function ii(e={}){const t=document.getElementById("botContainer");t.style.setProperty("--primary-color",e.primaryColor),t.style.setProperty("--secondary-color",e.secondaryColor),t.style.setProperty("--hover-color",e.hoverColor),t.style.setProperty("--container-color",e.containerBg),t.style.setProperty("--container-border-color",e.containerBorderBg),t.style.fontFamily=e.customerFont}function oi(e,t,n){let r,s,i,o,a,l,{propBotConfig:u=null}=t,{propGetConfigFromRemote:c=!1}=t,{localStorageKey:p}=t,{waitForStartNewConversation:h=!1}=t,f="",g="",d="",m="",y=!h,x=!1,b=!1,w=!!u,k=null;function v(e,t,r,s){return e&&W(e.version)?(function(e,t){let n=JSON.stringify(e);localStorage.setItem(t,n)}(e,r),k=e.startFrameId,e):(s||n(11,x=!0),e=J(!1,t,r,s),n(11,x=!1),e?(k=e.startFrameId,e):null)}function E(e){if(e){let t=ee(p)||hr(e,k,p);return t?(n(8,d=t.introduction),r=t.localeString,$(),n(10,y=!0),t):(console.log("failed to load conversation in loadConversation()"),n(10,y=!1),null)}console.log("Error calling loadConversation(): botConfig arg must be supplied")}var S;function $(){n(6,f=""),n(7,g=""),n(1,({completedRounds:s,replyType:a,replyOptions:i}=fr(p)),s,n(4,a),n(2,i))}function _(e,t){dr({userReplyValues:[e],userReplyIndexes:[t],ending:pr.completed,stats:{},localStorageKey:p}),$()}function T(e){!function(e,t,n){if(void 0===e||void 0===t||void 0===n)return console.log(`rewindConversation(): an argument is undefined: \n      rewoundRoundIndex:${e}\ngetConfigFromRemote:${t}\nlocalStorageKey:${n}`),null;const r=ee(n);r.completedRounds=r.completedRounds.slice(0,e);const s=J(!1,t,n,!1);r.unSpokenFrames=qn(s.frames),r.completedRounds.forEach((e=>{gr(r,e)})),te(r,n)}(e,!1,p),$()}function O(){try{parseTextInput(f)}catch(e){n(7,g=e),console.log(e.stack)}}function M(e){"Enter"===e.key&&O()}!async function(e,t,r,s){try{const i=v(e,r,t,s);if(i){let e=E(i);n(10,y=!0),await z(),ii(e.botCosmetics)}else if(!s)throw new X("getBotConfig() failed to acquire a botConfig from localStorage\n          and remote and waitForStartNewConversation prop was false")}catch(e){console.log(`botconfig load error: ${e}`),n(9,m=e),n(12,b=!0)}}(u,p,c,h),S=()=>{!function(){const e=document.querySelectorAll("#conversationHistory ul > li img:first-child, \n                    #currentAsk ul > li img:first-child");e.length>0&&(e.forEach((e=>e.style.marginTop="3rem")),e.forEach((e=>{e.parentElement.parentElement.style.listStyleType="none"})))}()},A().$$.after_update.push(S);return e.$$set=e=>{"propBotConfig"in e&&n(20,u=e.propBotConfig),"propGetConfigFromRemote"in e&&n(21,c=e.propGetConfigFromRemote),"localStorageKey"in e&&n(22,p=e.localStorageKey),"waitForStartNewConversation"in e&&n(0,h=e.waitForStartNewConversation)},[h,s,i,o,a,l,f,g,d,m,y,x,b,w,_,function(e){dr({userReplyValues:e.detail.map((e=>i[e])),userReplyIndexes:e.detail,ending:pr.completed,stats:{},localStorageKey:p}),$()},T,function(e){return e[0]===er[0]&&(e=Kn(1,e)),e},O,M,u,c,p,async function(e=null){try{let t=v(e||u,c,p,h);if(!t)throw new X("startNewConversation() failed to acquire a botConfig from localStorage and remote.");let s=hr(t,k,p);if(!s)throw new X("startNewConversation() failed to acquire conversation objectfrom initConversation()");r=s.localeString,n(8,d=s.introduction),$(),n(10,y=!0),await z(),ii(s.botCosmetics)}catch(e){console.log(`startNewConversation() botconfig error: ${e}`),n(9,m=e),n(12,b=!0)}},e=>T(e),(e,t)=>_(e,t),function(){l=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(5,l)},()=>_(i[l],l),function(){f=this.value,n(6,f)},e=>M(e),()=>n(3,o=!0)]}return e.Bot=class extends K{constructor(e){super(),H(this,e,oi,si,o,{propBotConfig:20,propGetConfigFromRemote:21,localStorageKey:22,waitForStartNewConversation:0,startNewConversation:23},null,[-1,-1])}get startNewConversation(){return this.$$.ctx[23]}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
